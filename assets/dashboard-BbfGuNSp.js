import{r as D,j as e}from"./vendor-react-DBCfnrhl.js";import{u as me}from"./vendor-utils-XM2idSp9.js";import{u as de,W as $,T as L,S as P,f as k,g as A,U as X,B as M,i as I,j as S,r as v,s as ue,n as xe}from"./index-DcXiqUAx.js";import{A as F}from"./arrow-right-aO4hc7tS.js";import{R as Z,A as pe,C as he,X as fe,Y as ge,T as q,a as J,i as je,j as be,k as ye}from"./vendor-charts-DBSHaJr6.js";import"./vendor-ui-BoghYNww.js";function Ne(r){const{grossAnnualIncome:s,children:x,contribution:m,childrenBornAfter2008:n=x}=r,p=175,f=300,d=185,a=60,c=2100,t=Math.max(a,s*.04),i=p,o=Math.max(0,x-n),l=n*f+o*d,j=i+l,u=Math.min(m,c),N=u>=t,w=N?void 0:`Mindestbeitrag nicht erreicht: ${t.toFixed(2)} EUR erforderlich (4% von ${s.toFixed(2)} EUR)`,C=Math.max(0,u-j),R=u>0?j/u*100:0;return{grundzulage:i,kinderzulage:l,totalSubsidy:j,requiredContribution:t,effectiveContribution:u,netCost:C,subsidyRate:R,isValid:N,validationMessage:w}}function ve(r){const{monthlyContribution:s,marginalTaxRate:x,includeEmployerMatch:m=!1,employerMatchRate:n=0}=r,p=584,f=.2,d=s*12,c=Math.min(s,p)*12,g=c*x,t=c*f,i=g+t,o=d,l=o-i,j=o>0?i/o*100:0,u=m?d*n:void 0,N=m?d+(u||0):void 0;return{monthlyContribution:s,annualContribution:d,taxFreeContribution:c,taxSavings:g,socialSecuritySavings:t,totalSavings:i,grossCost:o,netCost:l,savingsRate:j,employerContribution:u,totalWithEmployer:N}}function ke(r){const{principal:s,monthlyContribution:x,annualReturn:m,years:n}=r,p=m/12,f=n*12;let d=s,a=0;for(let l=0;l<f;l++)d*=1+p,d+=x,a+=x;const c=s+a,g=d-c,t=s*Math.pow(1+p,f)-s,i=g-t,o=n>0?(Math.pow(d/c,1/n)-1)*100:0;return{futureValue:d,principalGrowth:t,contributionsTotal:a,contributionsGrowth:i,totalGrowth:g,effectiveReturn:o}}const z={de:{title:"Schnellzugriff",copy:"Wählen Sie eine Aktion, um Ihre Altersvorsorge zu optimieren.",actions:[{title:"Private Rente berechnen",description:"Individuelle Simulation Ihrer Vorsorge",iconColor:"text-primary",icon:$,link:"/calculator"},{title:"Optionen vergleichen",description:"Vergleichen Sie unterschiedliche Produkte",iconColor:"text-emerald-600",icon:L,link:"/vergleich"},{title:"Fondsparplan ansehen",description:"Langfristige Geldanlage mit Fonds",iconColor:"text-purple-600",icon:P,link:"/fonds"}]},en:{title:"Quick Actions",copy:"Pick an action to optimise your retirement plan.",actions:[{title:"Calculate private pension",description:"Personal simulation for your portfolio",iconColor:"text-primary",icon:$,link:"/calculator"},{title:"Compare options",description:"See how different products stack up",iconColor:"text-emerald-600",icon:L,link:"/vergleich"},{title:"View fund savings",description:"Long-term investment with funds",iconColor:"text-purple-600",icon:P,link:"/fonds"}]}},Ae=(r,s)=>s(Number.isFinite(r)?r:0),B=({title:r,icon:s,value:x,formatter:m,description:n,valueClassName:p})=>e.jsxs(k,{children:[e.jsx(I,{className:"pb-2",children:e.jsxs(S,{className:"flex items-center justify-between text-sm font-medium text-muted-foreground",children:[r,s]})}),e.jsxs(A,{className:"space-y-1",children:[e.jsx("p",{className:`text-2xl font-semibold ${p??"text-foreground"}`,children:Ae(x,m)}),n?e.jsx("p",{className:"text-xs text-muted-foreground",children:n}):null]})]}),we=({language:r="de"})=>{const{data:s,isCompleted:x}=de(),[,m]=me();try{const n=D.useMemo(()=>{var H,Q;const t=s.personal||{},i=s.income||{},o=s.pensions||{},l=s.riester||{},j=s.ruerup||{},u=s.occupationalPension||{},N=s.privatePension||{},w=s.lifeInsurance||{},C=s.funds||{},R=s.savings||{},h=t.maritalStatus==="verheiratet"&&t.calcScope==="beide_personen",_=h?(i.netMonthly_A||0)+(i.netMonthly_B||0):i.netMonthly||0,U=h?(o.public67_A||0)+(o.public67_B||0)+(o.civil67_A||0)+(o.civil67_B||0)+(o.profession67_A||0)+(o.profession67_B||0)+(o.zvkVbl67_A||0)+(o.zvkVbl67_B||0):(o.public67||0)+(o.civil67||0)+(o.profession67||0)+(o.zvkVbl67||0),E=h?(l.amount_A||0)+(l.amount_B||0):l.amount||0,W=h?(j.amount_A||0)+(j.amount_B||0):j.amount||0,G=h?(u.amount_A||0)+(u.amount_B||0):u.amount||0,K=h?(N.contribution_A||0)+(N.contribution_B||0):N.contribution||0,ee=t.age||30,Y=Math.max(0,67-ee),te=.05,ne=.04;let T=0;K>0&&Y>0&&(T=ke({principal:0,monthlyContribution:K,annualReturn:te,years:Y}).futureValue*ne/12);const O=h?((i.netMonthly_A||0)+(i.netMonthly_B||0))*12*1.3:(i.netMonthly||0)*12*1.3,b=E>0?Ne({grossAnnualIncome:O,children:((H=t.children)==null?void 0:H.count)||0,contribution:E*12}):null,se=O>66760?.42:O>31400?.35:.25,y=G>0?ve({monthlyContribution:G,marginalTaxRate:se}):null,oe=h?(w.sum_A||0)+(w.sum_B||0):w.sum||0,re=h?(C.balance_A||0)+(C.balance_B||0):C.balance||0,ae=h?(R.balance_A||0)+(R.balance_B||0):R.balance||0,ie=oe+re+ae,V=U+E+W+G+T,le=_>0?V/_*100:0,ce=Math.max(0,_*.8-V);return{age:t.age||0,maritalStatus:t.maritalStatus||"ledig",children:((Q=t.children)==null?void 0:Q.count)??0,netMonthly:_,totalStatutoryPension:U,riesterAmount:E,ruerupAmount:W,occupationalAmount:G,privatePensionMonthlyPayout:T,totalRetirementIncome:V,totalAssets:ie,replacementRatio:le,pensionGap:ce,riesterSubsidy:(b==null?void 0:b.totalSubsidy)||0,riesterNetCost:(b==null?void 0:b.netCost)||0,riesterSubsidyRate:(b==null?void 0:b.subsidyRate)||0,occupationalTaxSavings:(y==null?void 0:y.totalSavings)||0,occupationalNetCost:(y==null?void 0:y.netCost)||0,occupationalSavingsRate:(y==null?void 0:y.savingsRate)||0}},[s]),p=D.useMemo(()=>{const t=[],i=n.age||30,o=67;for(let l=i;l<o;l+=5)t.push({age:l,aktuellesEinkommen:n.netMonthly,rentenEinkommen:0});for(let l=o;l<=85;l+=5)t.push({age:l,aktuellesEinkommen:0,rentenEinkommen:n.totalRetirementIncome});return t},[n]),f=D.useMemo(()=>{const t=[];return n.totalStatutoryPension>0&&t.push({name:r==="de"?"Gesetzliche Rente":"Statutory pension",value:n.totalStatutoryPension,color:"#0ea5e9"}),n.riesterAmount>0&&t.push({name:"Riester",value:n.riesterAmount,color:"#f97316"}),n.ruerupAmount>0&&t.push({name:"Rürup",value:n.ruerupAmount,color:"#8b5cf6"}),n.occupationalAmount>0&&t.push({name:r==="de"?"Betriebsrente":"Occupational pension",value:n.occupationalAmount,color:"#22c55e"}),t},[r,n]),a={de:{welcome:"Willkommen zurück",overview:"Ihr persönliches Cockpit für die Altersvorsorge.",currentIncome:"Aktuelles Netto-Einkommen",retirementIncome:"Erwartetes Renteneinkommen",pensionGap:"Versorgungslücke",replacementRatio:"Versorgungsquote",totalAssets:"Gesamtvermögen",perMonth:"/Monat",atAge:"mit 67 Jahren",personalInfo:"Persönliche Daten",age:"Alter",maritalStatus:"Familienstand",children:"Kinder",quickActions:z.de,incomeTimeline:"Einkommensentwicklung",pensionBreakdown:"Renten-Zusammensetzung",planNow:"Jetzt vorsorgen",pensionGapHeadline:"Versorgungslücke erkannt",ledig:"Ledig",verheiratet:"Verheiratet",geschieden:"Geschieden",dauernd_getrennt:"Dauernd getrennt",verwitwet:"Verwitwet",emptyStateMessage:"Bitte schließen Sie das Onboarding ab, um personalisierte Auswertungen zu sehen.",startOnboarding:"Onboarding starten"},en:{welcome:"Welcome back",overview:"Your personalised retirement cockpit.",currentIncome:"Current net income",retirementIncome:"Expected retirement income",pensionGap:"Pension gap",replacementRatio:"Replacement ratio",totalAssets:"Total assets",perMonth:"/month",atAge:"at age 67",personalInfo:"Personal information",age:"Age",maritalStatus:"Marital status",children:"Children",quickActions:z.en,incomeTimeline:"Income timeline",pensionBreakdown:"Pension breakdown",planNow:"Plan now",pensionGapHeadline:"Pension gap detected",ledig:"Single",verheiratet:"Married",geschieden:"Divorced",dauernd_getrennt:"Separated",verwitwet:"Widowed",emptyStateMessage:"Complete the onboarding to see personalised insights.",startOnboarding:"Start onboarding"}}[r],c=z[r],g=x||n.netMonthly>0&&n.age>0;return e.jsx("div",{className:"min-h-screen bg-background py-10",children:e.jsxs("div",{className:"container px-4 md:px-6",children:[e.jsxs("header",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:a.welcome}),e.jsx("p",{className:"mt-2 text-base text-muted-foreground sm:text-lg",children:a.overview})]}),!g&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(k,{className:"max-w-2xl w-full",children:e.jsxs(A,{className:"flex flex-col items-center text-center py-12 px-6",children:[e.jsx("div",{className:"mb-6 rounded-full bg-primary/10 p-6",children:e.jsx(X,{className:"h-16 w-16 text-primary"})}),e.jsx("h2",{className:"text-2xl font-semibold mb-3 text-foreground",children:r==="de"?"Willkommen!":"Welcome!"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md",children:a.emptyStateMessage}),e.jsxs(M,{size:"lg",onClick:()=>m("/calculator"),className:"gap-2",children:[a.startOnboarding,e.jsx(F,{className:"h-4 w-4"})]})]})}),e.jsx("section",{className:"mt-10 w-full max-w-4xl",children:e.jsxs(k,{children:[e.jsx(I,{children:e.jsxs(S,{className:"flex flex-col gap-1 text-base font-semibold",children:[e.jsx("span",{children:c.title}),e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:c.copy})]})}),e.jsx(A,{children:e.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:c.actions.map(t=>e.jsxs(M,{variant:"outline",className:"h-auto justify-start gap-3 rounded-xl border-dashed p-4 text-left transition hover:border-primary hover:bg-primary/5",onClick:()=>m(t.link),children:[e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 ${t.iconColor}`,children:e.jsx(t.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.description})]})]},t.title))})})]})})]}),g&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"mb-10 grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(B,{title:a.currentIncome,icon:e.jsx($,{className:"h-5 w-5 text-primary"}),value:n.netMonthly,formatter:v,description:a.perMonth}),e.jsx(B,{title:a.retirementIncome,icon:e.jsx(P,{className:"h-5 w-5 text-primary"}),value:n.totalRetirementIncome,formatter:v,description:a.atAge}),e.jsx(B,{title:a.pensionGap,icon:e.jsx(L,{className:"h-5 w-5 text-primary"}),value:n.pensionGap,formatter:v,description:`${a.replacementRatio}: ${n.replacementRatio>0?`${n.replacementRatio.toFixed(1)}%`:"–"}`,valueClassName:n.pensionGap>0?"text-destructive":"text-emerald-600"}),e.jsx(B,{title:a.totalAssets,icon:e.jsx(ue,{className:"h-5 w-5 text-primary"}),value:n.totalAssets,formatter:v,description:r==="de"?"Aktueller Stand":"Current balance"})]}),e.jsxs("section",{className:"mb-10 grid gap-4 lg:grid-cols-2",children:[e.jsxs(k,{children:[e.jsx(I,{className:"pb-2",children:e.jsxs(S,{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[e.jsx(xe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:a.incomeTimeline})]})}),e.jsx(A,{className:"h-[320px]",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(pe,{data:p,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"currentIncomeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#2563eb",stopOpacity:.25}),e.jsx("stop",{offset:"95%",stopColor:"#2563eb",stopOpacity:.05})]}),e.jsxs("linearGradient",{id:"retirementIncomeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0ea5e9",stopOpacity:.25}),e.jsx("stop",{offset:"95%",stopColor:"#0ea5e9",stopOpacity:.05})]})]}),e.jsx(he,{strokeDasharray:"3 3"}),e.jsx(fe,{dataKey:"age",tickLine:!1}),e.jsx(ge,{tickLine:!1,tickFormatter:t=>`${(t/1e3).toFixed(0)}k`}),e.jsx(q,{formatter:t=>v(t),labelFormatter:t=>`${r==="de"?"Alter":"Age"}: ${t}`}),e.jsx(J,{type:"monotone",dataKey:"aktuellesEinkommen",stroke:"#2563eb",fill:"url(#currentIncomeGradient)",name:r==="de"?"Netto-Einkommen":"Net income"}),e.jsx(J,{type:"monotone",dataKey:"rentenEinkommen",stroke:"#0ea5e9",fill:"url(#retirementIncomeGradient)",name:r==="de"?"Renten-Einkommen":"Retirement income"})]})})})]}),e.jsxs(k,{children:[e.jsx(I,{className:"pb-2",children:e.jsxs(S,{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[e.jsx(P,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:a.pensionBreakdown})]})}),e.jsx(A,{className:"h-[320px]",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(je,{children:[e.jsx(be,{data:f,cx:"50%",cy:"50%",labelLine:!1,outerRadius:110,dataKey:"value",label:({name:t,percent:i})=>`${t}: ${(i*100).toFixed(0)}%`,children:f.map(t=>e.jsx(ye,{fill:t.color},t.name))}),e.jsx(q,{formatter:t=>v(t)})]})})})]})]}),e.jsx("section",{className:"mb-10",children:e.jsxs(k,{children:[e.jsx(I,{children:e.jsxs(S,{className:"flex flex-col gap-1 text-base font-semibold",children:[e.jsx("span",{children:c.title}),e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:c.copy})]})}),e.jsx(A,{children:e.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:c.actions.map(t=>e.jsxs(M,{variant:"outline",className:"h-auto justify-start gap-3 rounded-xl border-dashed p-4 text-left transition hover:border-primary hover:bg-primary/5",onClick:()=>m(t.link),children:[e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 ${t.iconColor}`,children:e.jsx(t.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.description})]})]},t.title))})})]})}),n.pensionGap>0&&e.jsx(k,{className:"border border-amber-200 bg-amber-50",children:e.jsxs(A,{className:"flex flex-col gap-4 py-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-900",children:a.pensionGapHeadline}),e.jsx("p",{className:"text-sm text-amber-800",children:r==="de"?`Ihre erwartete Rente liegt ${v(n.pensionGap)} unter dem Ziel von 80% Ihres aktuellen Einkommens.`:`Your expected pension is ${v(n.pensionGap)} below the target of 80% of your current income.`})]}),e.jsxs(M,{onClick:()=>m("/calculator"),className:"w-full shrink-0 bg-amber-600 text-white hover:bg-amber-700 md:w-auto",children:[a.planNow,e.jsx(F,{className:"ml-2 h-4 w-4"})]})]})})]})]})})}catch(n){return console.error("[Dashboard] Critical error:",n),e.jsx("div",{className:"min-h-screen bg-background py-10",children:e.jsxs("div",{className:"container px-4 md:px-6",children:[e.jsxs("header",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Vista Pension Calculator"}),e.jsx("p",{className:"mt-2 text-base text-muted-foreground sm:text-lg",children:"Professioneller Rentenrechner für Ihre Altersvorsorge"})]}),e.jsx("div",{className:"flex flex-col items-center justify-center py-20",children:e.jsx(k,{className:"max-w-2xl w-full",children:e.jsxs(A,{className:"flex flex-col items-center text-center py-12 px-6",children:[e.jsx("div",{className:"mb-6 rounded-full bg-primary/10 p-6",children:e.jsx(X,{className:"h-16 w-16 text-primary"})}),e.jsx("h2",{className:"text-2xl font-semibold mb-3 text-foreground",children:"Willkommen!"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md",children:"Starten Sie mit der Berechnung Ihrer Altersvorsorge."}),e.jsxs(M,{size:"lg",onClick:()=>m("/calculator"),className:"gap-2",children:["Jetzt starten",e.jsx(F,{className:"h-4 w-4"})]})]})})})]})})}};function Be(){return e.jsx(we,{language:"de"})}export{Be as default};
